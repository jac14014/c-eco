<!DOCTYPE html>
<html lang="pt-pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Σ | c-ΣCO Technical Glossary</title>

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;600&family=Inter:wght@200;300;400&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --obsidian: #030303;
      --gold: #C5A065;
      --glass: rgba(255, 255, 255, 0.08);
      --glass-active: rgba(255, 255, 255, 0.15);
    }

    body {
      background-color: var(--obsidian);
      color: #e0e0e0;
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at 50% 50%, #0f0f12 0%, #030303 90%);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Scanline Effect */
    body::before {
      content: " ";
      position: fixed;
      top: 0; left: 0; bottom: 0; right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
      z-index: 100;
      background-size: 100% 4px;
      pointer-events: none;
      opacity: 0.1;
    }

    .search-container {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(3, 3, 3, 0.9);
      backdrop-filter: blur(20px);
      padding: 2rem 0;
      border-bottom: 1px solid var(--glass);
    }

    .search-input {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--glass);
      color: var(--gold);
      font-family: 'Rajdhani', sans-serif;
      letter-spacing: 0.1em;
      padding: 1rem 1.5rem;
      width: 100%;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--gold);
      background: rgba(255,255,255,0.05);
      box-shadow: 0 0 20px rgba(197, 160, 101, 0.1);
    }

    .glossary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
    }

    .command-card {
      background: rgba(15, 15, 18, 0.8);
      border: 1px solid var(--glass);
      padding: 2rem;
      transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
      cursor: pointer;
      position: relative;
    }

    .command-card.active-focus {
      border-color: var(--gold);
      background: rgba(197, 160, 101, 0.05);
      transform: scale(1.02);
      z-index: 10;
    }

    .command-card.linked-focus {
      border-color: #ffffff;
      background: rgba(255, 255, 255, 0.03);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
    }

    .command-card.muted {
      opacity: 0.2;
      filter: grayscale(1);
    }

    .code-id {
      font-family: 'Orbitron', sans-serif;
      color: var(--gold);
      font-size: 0.8rem;
      font-weight: 700;
    }

    .category-tag {
      font-family: 'Rajdhani', sans-serif;
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      padding: 2px 8px;
      border: 1px solid var(--glass);
      color: #71717a;
    }

    h3 {
      font-family: 'Rajdhani', sans-serif;
      font-weight: 600;
      font-size: 1.3rem;
      color: #fff;
      margin-top: 1rem;
    }

    .instrument-ref {
      font-size: 0.7rem;
      color: var(--gold);
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 1rem;
      display: block;
    }

    .function-desc {
      font-size: 0.9rem;
      line-height: 1.6;
      color: #a1a1aa;
    }

    .filter-btn {
      font-family: 'Rajdhani', sans-serif;
      font-size: 0.75rem;
      color: #52525b;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      padding: 0.5rem 1rem;
      transition: all 0.3s;
      border-bottom: 2px solid transparent;
      white-space: nowrap;
    }

    .filter-btn.active {
      color: var(--gold);
      border-bottom-color: var(--gold);
    }
  </style>
</head>

<body>
  <div class="search-container">
    <div class="container mx-auto px-8">
      <input
        type="text"
        id="searchInput"
        class="search-input"
        placeholder="SISTEMA DE BUSCA Σ: DIGITE O CÓDIGO OU INSTRUMENTO..."
      />

      <div class="mt-6 flex gap-4 overflow-x-auto">
        <button class="filter-btn active" onclick="filterCategory('all', this)">TODOS</button>
        <button class="filter-btn" onclick="filterCategory('Conceito', this)">CONCEITOS</button>
        <button class="filter-btn" onclick="filterCategory('Sistema', this)">SISTEMAS</button>
        <button class="filter-btn" onclick="filterCategory('Dever', this)">DEVERES</button>
        <button class="filter-btn text-white opacity-50" onclick="resetAll()">LIMPAR SELEÇÃO</button>
      </div>
    </div>
  </div>

  <main class="container mx-auto px-8 py-12">
    <div id="glossary" class="glossary-grid"></div>
  </main>

  <script>
  const commands = [
    {
      code: "CON2",
      category: "Conceito",
      instrument: "Cláusulas MAC / MAE",
      title: "IEX (Inexequibilidade Ex-Ante)",
      desc: "Trava automática antes da violação irreversível, baseada em trajetória técnica detectada ex-ante.",
      linksTo: ["SIS10", "SIS11", "SIS14", "SIS6"]
    },
    {
      code: "CON3",
      category: "Conceito",
      instrument: "Force Majeure",
      title: "Perclusão Sistêmica",
      desc: "Bloqueio de atos lícitos que constroem a trajetória do colapso sistêmico.",
      linksTo: ["CON2", "SIS6"]
    },
    {
      code: "CON4",
      category: "Conceito",
      instrument: "Margining / Colateral",
      title: "Garantia Condicionada",
      desc: "O colateral só subsiste enquanto o ativo permanecer biofisicamente viável.",
      linksTo: ["CON5", "SIS11"]
    },
    {
      code: "CON5",
      category: "Conceito",
      instrument: "Covenants",
      title: "Objeto Imediato Condicionado",
      desc: "A obrigação só existe enquanto houver reversibilidade sistêmica.",
      linksTo: ["SIS7", "SIS13"]
    },
    {
      code: "CON6",
      category: "Conceito",
      instrument: "Condições Precedentes (CPs)",
      title: "Validade Contínua",
      desc: "A condição de existência não se exaure na formação; persiste durante a execução.",
      linksTo: ["SIS10", "SIS6"]
    },
    {
      code: "CON7",
      category: "Conceito",
      instrument: "Price Adjustment / Indexação",
      title: "Safe Operating Space",
      desc: "Preço e valor tornam-se juridicamente nulos se violarem limites sistêmicos.",
      linksTo: ["SIS12", "SIS11"]
    },
    {
      code: "CON8",
      category: "Conceito",
      instrument: "Step-in Rights",
      title: "Perclusão de Trajetória",
      desc: "Vedação à continuidade do contrato mesmo com substituição de operador.",
      linksTo: ["CON3", "SIS6"]
    },
    {
      code: "CON9",
      category: "Conceito",
      instrument: "Earn-outs / Pagamentos Contingentes",
      title: "Vínculo de Habitabilidade",
      desc: "O valor econômico depende da preservação do ecossistema do ativo.",
      linksTo: ["SIS11", "CON7"]
    },
    {
      code: "CON10",
      category: "Conceito",
      instrument: "Seguros Paramétricos",
      title: "Gatilho de Curadoria",
      desc: "Fundos são liberados para correção da trajetória, não para indenização ex-post.",
      linksTo: ["DVR7", "SIS6"]
    },
    {
      code: "CON11",
      category: "Conceito",
      instrument: "Choice of Law / Impracticability",
      title: "Substituição por IEX Técnica",
      desc: "A causa jurídica cede ao critério sistêmico objetivo definido ex-ante.",
      linksTo: ["CON2", "SIS14"]
    },

    {
      code: "SIS6",
      category: "Sistema",
      instrument: "Netting / Close-out",
      title: "Safe Mode",
      desc: "Suspensão coordenada para impedir cascata de quebra sistêmica.",
      linksTo: ["DVR3", "CON2", "CON3"]
    },
    {
      code: "SIS7",
      category: "Sistema",
      instrument: "Early Termination",
      title: "Máquina de Estados",
      desc: "Execução por fases com degradação controlada em vez de ruptura binária.",
      linksTo: ["CON5", "DVR7"]
    },
    {
      code: "SIS8",
      category: "Sistema",
      instrument: "Audit & Inspection",
      title: "Integração LI-EI-AI",
      desc: "Auditoria com poder automático de comando contratual.",
      linksTo: ["SIS10", "SIS11"]
    },
    {
      code: "SIS9",
      category: "Sistema",
      instrument: "MRV / D-MRV",
      title: "Regime Probatório Digital",
      desc: "Dados sensoriais substituem prova declaratória humana.",
      linksTo: ["SIS13", "SIS14"]
    },
    {
      code: "SIS10",
      category: "Sistema",
      instrument: "Tríade LI-EI-AI",
      title: "Filtro Algorítmico de Admissibilidade",
      desc: "Valida compatibilidade sistêmica antes da execução contratual.",
      linksTo: ["SIS11", "CON6"]
    },
    {
      code: "SIS11",
      category: "Sistema",
      instrument: "Nexo Algorítmico",
      title: "Causalidade Ex-Ante",
      desc: "Causalidade jurídica definida por simulação preditiva antes do dano.",
      linksTo: ["SIS12", "CON2"]
    },
    {
      code: "SIS12",
      category: "Sistema",
      instrument: "Contribuição Marginal",
      title: "Trava do Último Agente",
      desc: "Responsabilização automática de quem ultrapassa o limiar acumulado.",
      linksTo: ["CON7", "SIS11"]
    },
    {
      code: "SIS13",
      category: "Sistema",
      instrument: "Tokens de Execução",
      title: "Execução Condicionada",
      desc: "Cláusulas só executam com validação por dados reais (D-MRV).",
      linksTo: ["CON5", "SIS9"]
    },
    {
      code: "SIS14",
      category: "Sistema",
      instrument: "Oráculos Técnicos",
      title: "Fonte Objetiva de Verdade",
      desc: "Feeds invioláveis (satélite, IoT, ciência) alimentam a lógica contratual.",
      linksTo: ["CON2", "SIS9"]
    },

    {
      code: "DVR3",
      category: "Dever",
      instrument: "Hardship / Renegociação",
      title: "Join Duty",
      desc: "Cooperação obrigatória com novação funcional do vínculo.",
      linksTo: ["SIS6", "DVR6"]
    },
    {
      code: "DVR4",
      category: "Dever",
      instrument: "Escrows / Holdbacks",
      title: "Garantia de Reversibilidade",
      desc: "Liberação condicionada à comprovação de impacto neutro.",
      linksTo: ["CON4", "SIS11"]
    },
    {
      code: "DVR5",
      category: "Dever",
      instrument: "Reps & Warranties / RWI",
      title: "Fidelidade Técnica",
      desc: "Erro técnico invalida o consentimento jurídico.",
      linksTo: ["SIS11", "CON9"]
    },
    {
      code: "DVR6",
      category: "Dever",
      instrument: "Dispute Boards / Fast-Track",
      title: "Curadoria do Sistema",
      desc: "As partes deixam de litigar e passam a preservar o sistema.",
      linksTo: ["DVR3", "SIS6"]
    },
    {
      code: "DVR7",
      category: "Dever",
      instrument: "Governança Contínua",
      title: "Curadoria de Trajetória",
      desc: "Dever contínuo de preservar a habitabilidade do fluxo de execução.",
      linksTo: ["SIS7", "CON10"]
    }
  ];

  function renderGlossary(data) {
    const container = document.getElementById("glossary");
    container.innerHTML = data
      .map(
        (cmd) => `
          <div class="command-card"
            id="card-${cmd.code}"
            onclick="toggleConnection('${cmd.code}')"
            data-category="${cmd.category}">
            <div class="flex justify-between items-start">
              <span class="code-id">${cmd.code}</span>
              <span class="category-tag">${cmd.category}</span>
            </div>
            <h3>${cmd.title}</h3>
            <span class="instrument-ref">${cmd.instrument}</span>
            <p class="function-desc">${cmd.desc}</p>
          </div>
        `
      )
      .join("");
  }

  function toggleConnection(code) {
    const activeCmd = commands.find((c) => c.code === code);
    const activeEl = document.getElementById(`card-${code}`);
    const allCards = document.querySelectorAll(".command-card");

    if (!activeCmd || !activeEl) return;

    if (activeEl.classList.contains("active-focus")) {
      resetAll();
      return;
    }

    allCards.forEach((card) => {
      card.classList.remove("active-focus", "linked-focus", "muted");
      card.classList.add("muted");
    });

    activeEl.classList.remove("muted");
    activeEl.classList.add("active-focus");

    (activeCmd.linksTo || []).forEach((targetCode) => {
      const targetEl = document.getElementById(`card-${targetCode}`);
      if (targetEl) {
        targetEl.classList.remove("muted");
        targetEl.classList.add("linked-focus");
      }
    });
  }

  function resetAll() {
    document.querySelectorAll(".command-card").forEach((card) => {
      card.classList.remove("active-focus", "linked-focus", "muted");
    });
  }

  function filterCategory(cat, btn) {
    document.querySelectorAll(".filter-btn").forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");

    if (cat === "all") {
      renderGlossary(commands);
    } else {
      const filtered = commands.filter((c) => c.category === cat);
      renderGlossary(filtered);
    }
    resetAll();
  }

  document.getElementById("searchInput").addEventListener("input", (e) => {
    const term = e.target.value.toLowerCase();
    const filtered = commands.filter((cmd) =>
      cmd.title.toLowerCase().includes(term) ||
      cmd.code.toLowerCase().includes(term) ||
      cmd.instrument.toLowerCase().includes(term)
    );
    renderGlossary(filtered);
    resetAll();
  });

  renderGlossary(commands);
</script>
</body>
</html>
